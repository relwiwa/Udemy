<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://java.sun.com/jsf/facelets"
>

<t:composition template="/WEB-INF/templates/standardtemplate.xhtml">
	<t:define name="pagetitle">#{msg['create.title']}</t:define>
	<t:define name="content">
		<f:view>
			<h:form>
				<h:panelGrid columns="3">
					<h:outputText value="#{msg['create.author']}" />
					<h:inputText id="bookAuthor" value="#{book.author}" />
					<h:message for="bookAuthor" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.name']}" />
					<h:inputText id="bookTitle" value="#{book.name}" />
					<h:message for="bookTitle" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.publishDate']}" />
					<h:inputText id="bookPublishDate" value="#{book.publishDate}">
						<f:convertDateTime pattern="dd-MM-yyyy" />
					</h:inputText>
					<h:message for="bookPublishDate" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.language']}" />
					<h:selectOneListbox id="bookLanguage" value="#{book.language}">
						<f:selectItems value="#{book.languages}"></f:selectItems>
						<f:valueChangeListener type="jsfbeans.LanguageValueChangeListener"></f:valueChangeListener>	
					</h:selectOneListbox>
					<h:message for="bookLanguage" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.price']}" />
					<h:inputText
						converterMessage="Der Preis muss mit EUR 9,99 z.B. angegeben werden"
						id="bookPrice"
						value="#{book.price}"
					>
						<f:convertNumber
							type="currency"
							currencyCode="EUR"
						/>
					</h:inputText>
					<h:message for="bookPrice" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.departments']}" />
					<h:selectManyListbox
						id="bookEmailaddresses"
						value="#{book.emailaddresses}"
						valueChangeListener="#{book.emailAddressChanged}"
					>
						<f:selectItem itemValue="abteilung1@mycompany.de" itemLabel="Abteilung 1" />		
						<f:selectItem itemValue="abteilung2@mycompany.de" itemLabel="Abteilung 2" />
						<f:ajax event="valueChange" listener="#{book.emailAddressChangedAjax}" render="sm" />
					</h:selectManyListbox>
					<h:message for="bookEmailaddresses" styleClass="errorMessage" />
				</h:panelGrid>
				
				<h:outputText value="#{book.specialmessage}" id="sm" /><br />
		
				<!--  actionListener-Methode wird vor action-Methode aufgerufen -->
				<h:commandButton
					value="#{msg['create.save']}"
					action="#{book.save}"
					actionListener="#{book.saveListener}"
				/>
			</h:form>
		</f:view>
	</t:define>
</t:composition>
</html>