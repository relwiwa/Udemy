<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://java.sun.com/jsf/facelets"
>

<t:composition template="/WEB-INF/templates/standardtemplate.xhtml">
	<t:define name="pagetitle">#{msg['create.title']}</t:define>
	<t:define name="content">
		<f:view>
			<h:form>
				<h:panelGrid columns="3">
					<h:outputText value="#{msg['create.author']}" />
					<h:inputText
						id="bookAuthor"
						value="#{bookShelf.inedit.author}"
						required="true"
						requiredMessage="Bitte den Autor des Buchs angeben!"
					>
						<f:validator validatorId="vornameNachnameValidator" />
					</h:inputText>
					<h:message for="bookAuthor" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.name']}" />
					<h:inputText
						id="bookTitle"
						value="#{bookShelf.inedit.name}"
						validatorMessage="Der Titel des Buchs muss mindestens 5 und maximal 50 Zeichen lang sein"
					>
						<f:validateLength minimum="5" maximum="50" />
					</h:inputText>
					<h:message for="bookTitle" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.publishDate']}" />
					<h:inputText id="bookPublishDate" value="#{bookShelf.inedit.publishDate}">
						<f:convertDateTime pattern="dd-MM-yyyy" />
					</h:inputText>
					<h:message for="bookPublishDate" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.language']}" />
					<h:selectOneListbox id="bookLanguage" value="#{bookShelf.inedit.language}">
						<f:selectItems value="#{book.languages}"></f:selectItems>
						<f:valueChangeListener type="jsfbeans.LanguageValueChangeListener"></f:valueChangeListener>	
					</h:selectOneListbox>
					<h:message for="bookLanguage" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.price']}" />
					<h:inputText
						converterMessage="Der Preis muss mit EUR 9,99 z.B. angegeben werden"
						id="bookPrice"
						value="#{bookShelf.inedit.price}"
					>
						<f:convertNumber
							type="currency"
							currencyCode="EUR"
						/>
					</h:inputText>
					<h:message for="bookPrice" styleClass="errorMessage" />
					
					<h:outputText value="#{msg['create.departments']}" />
					<h:selectManyListbox
						id="bookEmailaddresses"
						value="#{bookShelf.inedit.emailaddresses}"
						valueChangeListener="#{bookShelf.inedit.emailAddressChanged}"
					>
						<f:selectItem itemValue="abteilung1@mycompany.de" itemLabel="Abteilung 1" />		
						<f:selectItem itemValue="abteilung2@mycompany.de" itemLabel="Abteilung 2" />
						<f:ajax event="valueChange" listener="#{bookShelf.inedit.emailAddressChangedAjax}" render="sm" />
					</h:selectManyListbox>
					<h:message for="bookEmailaddresses" styleClass="errorMessage" />
				</h:panelGrid>
				
				<h:outputText value="#{bookShelf.inedit.specialmessage}" id="sm" /><br />
		
				<!--  actionListener-Methode wird vor action-Methode aufgerufen -->
				<h:commandButton
					value="#{msg['create.save']}"
					action="#{bookShelf.saveBook}"
				/>
			</h:form>
		</f:view>
	</t:define>
</t:composition>
</html>